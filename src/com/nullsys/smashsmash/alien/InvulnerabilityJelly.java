package com.nullsys.smashsmash.alien;

import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.math.MathUtils;
import com.badlogic.gdx.math.Vector2;
import com.nullsys.smashsmash.bonuseffect.BonusEffect;
import com.nullsys.smashsmash.bonuseffect.Invulnerability;
import com.nullsys.smashsmash.screen.SmashSmashStageCallback;

public class InvulnerabilityJelly extends Jelly {

    private float spawnDelay = 0;

    public InvulnerabilityJelly(SmashSmashStageCallback stage) {
	super(stage);
	risingState.setColor(Color.ORANGE);
	waitingState.setColor(Color.ORANGE);
	attackingState.setColor(Color.ORANGE);
	stunnedState.setColor(Color.ORANGE);
	smashedState.setColor(Color.ORANGE);
	hidingState.setColor(Color.ORANGE);
    }

    @Override
    public void rise(float delay, float volume) {
	if (spawnDelay <= 0) {
	    spawnDelay = 15f + MathUtils.random(25f);
	    super.rise(delay, volume);
	}
    }

    @Override
    public void smash() {
	new Invulnerability(new Vector2(0, 0), 10f).trigger();
	stage.onBonusEffectTrigger(BonusEffect.INVULNERABILITY);
	super.smash();
    }

    @Override
    public void update(float delta) {
	super.update(delta);
	spawnDelay -= delta;
    }

}
